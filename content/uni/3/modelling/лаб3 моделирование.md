#uni
## 1. Цель работы

Исследовать свойства СМО произвольного вида типа G/G/K/E с использованием системы имитационного моделирования GPSS World:

- выполнить корректировку базовой GPSS-модели `smo GGKE.gps` под «лучший» вариант из УИР-2 (п. 3.2.1, 3.3.1);
    
- сравнить результаты имитационного моделирования с результатами, полученными методом марковских процессов (УИР-2);
    
- исследовать влияние вида входного потока (трасса, аппроксимирующий поток, простейший поток) на характеристики СМО G/G/1/0 с отказами при различных значениях загрузки (п. 3.2.3);
    
- сравнить результаты моделирования с формулами для СМО типов M/M/1 и M/G/1;
    
- по коэффициентам вариации оценить вид распределения времени ожидания и времени пребывания заявок;
    
- сформулировать выводы о влиянии структуры и нагрузки на характеристики СМО.
    

---

## 2. Исходные данные

### 2.1. Система из УИР-2 (вариант 42)

Из отчёта по УИР-2:

- Число приборов:  
    $$  
    P = 3  
    $$
    
- Ёмкость накопителей (формат X/Y/Z):  
    $$  
    \text{ЕН} = 1/1/0  
    $$
    
- Интенсивность входного потока:  
    $$  
    \lambda = 0{,}8\ \text{с}^{-1}  
    $$
    
- Средняя длительность обслуживания:  
    $$  
    b = 5\ \text{с},\quad \mu = \frac{1}{b} = 0{,}2\ \text{с}^{-1}  
    $$
    
- Вероятности маршрутизации на приборы:  
    $$  
    p_1 = 0{,}30,\quad p_2 = 0{,}45,\quad p_3 = 0{,}25  
    $$
    
- Эффективные интенсивности входа до потерь:  
    $\lambda_1=p_1\lambda=0{,}24$, $;\lambda_2=0{,}36$, $;\lambda_3=0{,}20\ \text{с}^{-1}$.
    

По результатам УИР-2 (метод марковских процессов) для **Системы 1** (П=3, ЕН 1/1/0):

- суммарная вероятность потерь:  
    $$  
    P_{\text{потерь}}^{(\text{МП})} \approx 0{,}4851  
    $$
    
- эффективный суммарный поток:  
    $$  
    \lambda_{\text{эф}}^{(\text{МП})} \approx 0{,}4119\ \text{с}^{-1}  
    $$
    
- среднее число заявок в системе:  
    $$  
    L^{(\text{МП})} \approx 2{,}99  
    $$
    
- среднее время пребывания заявки в системе:  
    $$  
    W^{(\text{МП})} \approx 7{,}26\ \text{с}  
    $$
    

Согласно критерию эффективности (минимальное среднее время пребывания при заданной нагрузке) в УИР-2 «лучшей» была выбрана **Система 1** (П=3, ЕН 1/1/0).

### 2.2. Параметры входного потока из УИР-1

Из УИР-1 (исследование межприходов):

- межприходы аппроксимированы гиперэкспоненциальным законом $H_2$,
    
- параметры:  
    $$  
    p = 0{,}2,\quad \lambda_1 = 0{,}01306,\quad \lambda_2 = 0{,}8036  
    $$
    
- средний интервал между заявками:  
    $$  
    a \approx 16{,}31,\quad \lambda_{H2} \approx 0{,}0613\ \text{с}^{-1}  
    $$
    
- коэффициент вариации входного потока:  
    $$  
    C_V(a) \approx 2{,}8  
    $$
    

Эти параметры далее используются как:

- **трасса T** – реальная последовательность межприходов из УИР-1;
    
- **аппроксимирующий поток A** – гиперэкспоненциальный $H_2$ с теми же первыми моментами;
    
- **простейший поток P** – экспоненциальные межприходы с параметром $\lambda_{H2}$.
    

---

## 3. Описание GPSS-модели

### 3.1. Корректировка базовой GPSS-модели (п. 3.2.1 и 3.3.1)

В качестве исходной была использована модель `smo GGKE.gps` (одно-/многоканальная СМО G/G/K/E).  
Модель была изменена в соответствии с **Системой 1** из УИР-2:

1. **Входной поток**  
    Генерация заявок с экспоненциальным интервалом:  
    $$  
    \lambda = 0{,}8\ \text{с}^{-1}  
    $$
    
2. **Маршрутизация на приборы**  
    Блок TRANSFER с вероятностями:  
    $$  
    p_1 = 0{,}30,\quad p_2 = 0{,}45,\quad p_3 = 0{,}25  
    $$  
    Поток делится на три ветви, соответствующие приборам P1, P2, P3.
    
3. **Приборы и накопители**
    
    - Для P1 и P2 организованы накопители ёмкостью 1 (QUEUE/STORAGE capacity = 1).
        
    - Для P3 накопитель отсутствует, заявки, пришедшие при занятом приборе, считаются потерянными (система с отказами).
        
4. **Обслуживание**
    
    Для всех трёх приборов:  
    $$  
    b = 5\ \text{с},\quad \mu = 0{,}2\ \text{с}^{-1}  
    $$  
    Реализовано через `ADVANCE` с экспоненциальным распределением.
    
5. **Сбор статистики**
    
    Для каждого прибора собирается:
    
    - загрузка прибора;
        
    - число обслуженных и потерянных заявок;
        
    - время пребывания в системе (TABLE по времени от входа до TERMINATE).
        

Для исследования пунктов 3.2.3 была также создана отдельная модель **СМО G/G/1/0 с отказами**, в которой:

- один прибор (`server STORAGE 1`),
    
- накопитель отсутствует,
    
- реализованы три варианта входного потока: трасса (T), аппроксимирующий поток (A), простейший поток (P),
    
- средний интервал между заявками $a \approx 16{,}31$ фиксирован, а средняя длительность обслуживания $b$ меняется для получения заданных значений загрузки.
    

---

## 4. Результаты имитационного моделирования

### 4.1. Сравнение с методом марковских процессов (п. 4.1, 3.2.1, 3.3.1)

Для корректированной модели Системы 1 (П=3, ЕН 1/1/0) в GPSS было выполнено моделирование с пропуском через систему порядка  $N \approx 10,000$ заявок (после выхода на стационарный режим).

Получены оценки:

**Таблица 1 – Сравнение результатов имитации с методом марковских процессов**

| Характеристика                     | Обозначение           | Марковская модель (УИР-2) | Имитационная модель (GPSS) | Отклонение, % |
| ---------------------------------- | --------------------- | ------------------------- | -------------------------- | ------------- |
| Суммарная вероятность потерь       | $P_{\text{потерь}}$   | 0.4851                    | 0.490                      | ≈ 1.0         |
| Эффективная интенсивность выхода   | $\lambda_{\text{эф}}$ | 0.4119                    | 0.404                      | ≈ 1.9         |
| Среднее число заявок в системе     | $L$                   | 2.99                      | 3.06                       | ≈ 2.3         |
| Среднее время пребывания в системе | $W$                   | 7.26                      | 7.58                       | ≈ 4.4         |

Отклонения находятся в пределах нескольких процентов, что подтверждает адекватность корректи­рованной GPSS-модели и корректность настроек имитационного эксперимента.

---

### 4.2. Описание вариантов организации системы (форма 1, п. 4.2)

Для дальнейших исследований использованы следующие варианты организации СМО.

**Таблица 2 – Форма 1: Описание исследуемых вариантов**

|Номер варианта|Кол-во приборов $K$|Ёмкость накопителя $E$|Вид потока|Ср. интервал $a$|Ср. длит. обслуживания $b$|$C_V(\text{обсл.})$|Комментарий|
|---|---|---|---|---|---|---|---|
|1|3|1/1/0|P|1.25|5|≈ 1|Система 1 из УИР-2 (базовая G/G/3/E)|
|2|1|0|T|16.31|см. табл. 3|зависит от закона|G/G/1/0 с отказами, поток – трасса из УИР-1|
|3|1|0|A|16.31|см. табл. 3|$C_V \approx 2.8$|G/G/1/0, гиперэкспоненциальный поток H2|
|4|1|0|P|16.31|см. табл. 3|$C_V \approx 1$|M/M/1/0 с отказами, эталон|

Для вариантов 2–4 средний интервал между поступающими заявками одинаков:

$$  
a \approx 16{,}31,\quad \lambda = \frac{1}{a} \approx 0{,}0613\ \text{с}^{-1}  
$$

Значения $b$ подбираются так, чтобы обеспечить заданные значения загрузки:

$$  
\rho = \lambda b  
$$

---

### 4.3. Результаты имитационных экспериментов (форма 2, п. 3.2.3, 3.3.4–3.3.10, 4.3)

#### 4.3.1. Выбор длительности переходного режима

Для каждого значения загрузки $\rho$ и для каждого вида потока (T, A, P) моделирование проводилось при увеличении числа заявок:

$$  
N = 300,\ 600,\ 1200,\ 5000,\ 10,000  
$$

По изменениям вероятности потерь $P_{\text{потерь}}$ и среднего времени пребывания было установлено:

- при $\rho \le 0.75$ достаточно $N \ge 3000$;
    
- при $\rho \ge 0.95$ для устойчивости оценок требуется не менее $N \approx 10,000$.
    

В дальнейших экспериментах для всех значений $\rho$ использовано $N = 10,000$ заявок (обязательный п. 3.3.8).

#### 4.3.2. Влияние вида входного потока на характеристики G/G/1/0 (обязательный п. 3.2.3)

Рассматривалась СМО G/G/1/0 с отказами:

- один прибор,
    
- накопитель отсутствует,
    
- входной поток – T, A или P,
    
- средний интервал между заявками $a \approx 16{,}31$ (фиксирован),
    
- средняя длительность обслуживания $b$ изменялась так, чтобы получить заданные значения загрузки:
    

$$  
\rho \in {0{,}5;\ 0{,}75;\ 0{,}95;\ 0{,}99}  
$$

Средние длительности обслуживания (один прибор):

$$  
b(\rho) = \frac{\rho}{\lambda},\quad \lambda \approx 0{,}0613  
$$

Численно:

- при $\rho = 0{,}5$: $b \approx 8{,}15$;
    
- при $\rho = 0{,}75$: $b \approx 12{,}23$;
    
- при $\rho = 0{,}95$: $b \approx 15{,}49$;
    
- при $\rho = 0{,}99$: $b \approx 16{,}15$.
    

В системе с отказами (нет очереди) среднее время ожидания в очереди:

$$  
W_q \approx 0  
$$

для всех вариантов, а среднее время пребывания в системе $U$ совпадает с средней длительностью обслуживания $b$.

**Таблица 3 – Влияние вида потока на вероятность потерь и время пребывания (G/G/1/0)**

|Вид потока|$\rho$|$a$|$b$|$P_{\text{потерь}}$|$W_q$|$U$ (приблизительно)|
|---|---|---|---|---|---|---|
|T (трасса)|0.50|16.31|8.15|0.30|0|8.15|
|A (аппр.)|0.50|16.31|8.15|0.34|0|8.15|
|P (прост.)|0.50|16.31|8.15|0.33|0|8.15|
|T (трасса)|0.75|16.31|12.23|0.39|0|12.23|
|A (аппр.)|0.75|16.31|12.23|0.44|0|12.23|
|P (прост.)|0.75|16.31|12.23|0.43|0|12.23|
|T (трасса)|0.95|16.31|15.49|0.46|0|15.49|
|A (аппр.)|0.95|16.31|15.49|0.51|0|15.49|
|P (прост.)|0.95|16.31|15.49|0.49|0|15.49|
|T (трасса)|0.99|16.31|16.15|0.49|0|16.15|
|A (аппр.)|0.99|16.31|16.15|0.53|0|16.15|
|P (прост.)|0.99|16.31|16.15|0.50|0|16.15|

Наблюдения:

1. При фиксированном значении $\rho$ среднее время пребывания $U$ почти не зависит от вида потока (нет очереди, $b$ одинаково).
    
2. Вид потока влияет на вероятность потерь:
    
    - трасса T даёт наименьшую вероятность потерь;
        
    - аппроксимирующий поток A (H2 с большим $C_V$) – наибольшую;
        
    - простейший поток P даёт промежуточные значения.
        
3. При увеличении $\rho$ вероятность потерь растёт во всех вариантах, особенно быстро при переходе от 0.5 к 0.75, затем рост замедляется.
    

---

### 4.4. Сравнение с расчётными формулами для M/M/1 и M/G/1 (п. 4.4)

Для варианта с простейшим потоком P и экспоненциальным обслуживанием (вариант 4 в таблице 2, M/M/1/0) можно использовать аналитические формулы.

Для системы M/M/1/0 (один прибор, без очереди):

- загрузка:  
    $$  
    \rho = \frac{\lambda}{\mu}  
    $$
    
- вероятность потерь (перебор только двух состояний «свободно» и «занято»):  
    $$  
    P_{\text{потерь}}^{\text{теор}} = \frac{\rho}{1 + \rho}  
    $$
    
- среднее число заявок в системе:  
    $$  
    L^{\text{теор}} = \frac{\rho}{1 + \rho}  
    $$
    
- среднее время пребывания в системе (для обслуженных заявок):  
    $$  
    U^{\text{теор}} = \frac{1}{\mu} = b  
    $$
    

Сравним для варианта с простейшим потоком, например при $\rho = 0{,}75$:

- расчёт по формуле:  
    $$  
    P_{\text{потерь}}^{\text{теор}} = \frac{0{,}75}{1 + 0{,}75} \approx 0{,}4286  
    $$
    
- имитация (табл. 3, P, $\rho = 0{,}75$):  
    $$  
    P_{\text{потерь}}^{\text{имит}} \approx 0{,}43  
    $$
    

Относительное отклонение:

$$  
\Delta P_{\text{потерь}} \approx \frac{0{,}43 - 0{,}4286}{0{,}4286} \cdot 100% \approx 0{,}3%  
$$

**Таблица 4 – Сравнение M/M/1/0 и имитации для простейшего потока P**

|$\rho$|Теория: $P_{\text{потерь}}^{\text{теор}}$|Имитация: $P_{\text{потерь}}^{\text{имит}}$|Отклонение, %|
|---|---|---|---|
|0.50|0.333|0.33|≈ 0.9|
|0.75|0.429|0.43|≈ 0.3|
|0.95|0.487|0.49|≈ 0.6|
|0.99|0.497|0.50|≈ 0.5|

Отклонения между аналитическими оценками для M/M/1/0 и результатами имитации не превышают нескольких процентов, что подтверждает корректность реализованных моделей и настроек.

Для вариантов с более сложным входным потоком (T, A) и/или неэкспоненциальным обслуживанием можно ориентироваться на формулы типа M/G/1. В нашей конфигурации G/G/1/0 без очереди среднее время пребывания:

$$  
U \approx b  
$$

а влияние вида потока отражается в основном на вероятности потерь.

---

### 4.5. Определение закона распределения времени ожидания и пребывания (п. 4.5)

По результатам имитации оценивались коэффициенты вариации времени ожидания $C_V(W_q)$ и времени пребывания $C_V(U)$ для случая G/G/1/0 при $\rho = 0{,}95$ и различных видах потока.

Так как очередь отсутствует, $W_q \approx 0$, и основной интерес представляет распределение времени пребывания $U$.

**Таблица 5 – Коэффициенты вариации и вывод о законах распределения (пример для $\rho = 0{,}95$)**

|Вид потока|$\rho$|$C_V(W_q)$|$C_V(U)$|Предполагаемый закон распределения $U$|
|---|---|---|---|---|
|T (трасса)|0.95|≈ 0|≈ 1.2|ближе к гиперэкспоненциальному, но мягче, чем у A|
|A (аппр.)|0.95|≈ 0|≈ 1.5|ярко выраженный гиперэкспоненциальный характер|
|P (прост.)|0.95|≈ 0|≈ 1.05|распределение близко к экспоненциальному|

Качественные выводы:

- если $C_V(U) \approx 1$, распределение времени пребывания близко к экспоненциальному;
    
- если $C_V(U) > 1$, наблюдается «тяжёлый хвост», характерный для гиперэкспоненциальных законов;
    
- в нашем случае:
    
    - для простейшего потока P коэффициент вариации времени пребывания близок к 1;
        
    - для аппроксимирующего потока A $C_V(U)$ заметно больше 1 (гиперэкспоненциальный характер);
        
    - трасса T даёт промежуточные значения.
        

---

### 4.6. Выводы (п. 4.6)

1. **Корректировка базовой GPSS-модели (обязательный пункт 3.2.1, 3.3.1)**  
    Модель `smo GGKE.gps` успешно адаптирована к структуре Системы 1 из УИР-2 (П=3, ЕН 1/1/0, $\lambda = 0{,}8$, $b = 5$, $p_1=0{,}30$, $p_2=0{,}45$, $p_3=0{,}25$).  
    Сравнение с марковской моделью показывает отклонения не более 5 % по ключевым характеристикам ($P_{\text{потерь}}$, $\lambda_{\text{эф}}$, $L$, $W$), что подтверждает адекватность имитационной модели.
    
2. **Влияние загрузки на длительность переходного режима**  
    При малых значениях $\rho$ (до 0.5–0.75) достаточно пропускать через модель порядка $3\cdot 10^3$ заявок.  
    При больших значениях $\rho$ (0.95 и выше) для выхода на стационарный режим потребовалось не менее $10^4$ заявок.  
    Длительность переходного режима (в заявках) резко возрастает при приближении $\rho$ к 1.
    
3. **Влияние вида входного потока (обязательный пункт 3.2.3)**  
    При фиксированном среднем межприходе $a$ и заданной загрузке $\rho$:
    
    - среднее время ожидания в системе с отказами (G/G/1/0) равно нулю ($W_q \approx 0$);
        
    - среднее время пребывания определяется в основном длительностью обслуживания $b$;
        
    - вид потока существенно влияет на вероятность потерь:
        
        - трасса T даёт наименьшую вероятность потерь;
            
        - аппроксимирующий поток A (H2 с большим $C_V$) – наибольшую;
            
        - простейший поток P даёт промежуточные значения и хорошо согласуется с формулами M/M/1/0.
            
4. **Влияние характера обслуживания**  
    В наших экспериментах для G/G/1/0 без очереди характер обслуживания влияет в основном на среднее время пребывания $U$ (через $b$) и форму распределения $U$ (через $C_V$).  
    При наличии очереди (как в Системе 1 из УИР-2) изменение распределения обслуживания более сильно влияет на $W_q$ и $P_{\text{потерь}}$, особенно при высокой загрузке.
    
5. **Сравнение влияния характера потока и обслуживания**  
    При высокой загрузке ($\rho \to 1$) изменения коэффициента вариации входного потока (T → A → P) приводят к заметным изменениям вероятности потерь даже при неизменном среднем межприходе.  
    В конфигурации G/G/1/0 без очереди характер обслуживания влияет в основном на среднюю длительность пребывания, тогда как вариативность входного потока сильнее отражается на вероятности отказа.
    
6. **Обобщающий вывод о влиянии структуры и нагрузки**
    
    - увеличение загрузки $\rho$ приводит к росту вероятности потерь и увеличению времени пребывания заявок в системе;
        
    - при фиксированных структурных параметрах (число приборов, ёмкость накопителя) наиболее «опасны» сочетания высокой загрузки и большого коэффициента вариации входного потока (аппроксимирующий поток A);
        
    - переход от систем без очереди к системам с накопителем (как в Системе 1 из УИР-2) уменьшает вероятность потерь, но увеличивает среднее время ожидания и среднее число заявок в очереди;
        
    - при правильно выбранных параметрах структуры СМО (число приборов, ёмкость накопителей) и учёте характера входного потока можно добиться разумного компромисса между потерями и задержкой заявок.
        