#uni 
#prog
# Стратегии замещения страниц ОС

> Какие именно кадры работающего процесса нужно выбрать для замещения и использования другими процессами? 

- Выгрузим кадр, обращения к которому не последует в ближайшее время
- Используется статистика прошлого поведения
- Необходимо учитывать locked frames, не все страницы можно выгрузить (часть ядра, буферы, ...)
- Если кадр совместно используется много раз, то его выгрузка повлияет на много процессов
- "Оптимальная стратегия": страница, к которой обращение будет через наибольший промежуток времени.

"Оптимальная стратегия" — невозможная  стратегия, используемая для сравнения других стратегий. Такую можно построить только зная наперёд все запросы к памяти. Почему невозможно понятных процессах: процессы зависят от входных данных, поменяются данные --- поменяются и обращения к памяти.

Замещение страниц: (LRU, Least Recently Used) основывается на том, когда страница была использована последний раз. Если нам нужно догрузить новую страницу в память, то мы вытесняем ту, что использовалась давнее всего. Наименее используемые определять == нагрузка на систему в момент свопинга, поэтому в чистом виде используется редко.

Замещение страниц: FIFO(First In First Out) 
Реализовывается просто: первая загруженная страница будет выгружена первой. Не используется в чистом виде из-за неэффективности 

### Замещение страниц: Часовой алгоритм
Каждой странице памяти назначаем бит изменения. если мы обращаемся к странице памяти, то ставим этот бит. По всем страницам ходят две стрелки (Front hand, Back hand) (FH, BH), которые вращаются одновременно с одной скоростью. FH сбрасывает бит изменения, BH проверяет этот бит и помещает страницы,  у которых он не устовлен, в буфер вытеснения.
Расстояние между стрелками выставляется динамически, чем оно меньше, тем быстрее страницы будут вытесняться.
Этот алгоритм в современных системах занимает слишком много времени, поэтому с него системы перешли к другим, более сложным алгоритмам.


### Управление резидентной частью процесса.
Резидентная часть процесса — та часть, которая выделена процессу в памяти. Её размером управляет система, при этом она учитывает: 
- Нет смысла держать весь процесс в памяти целиком
- Чем меньше процессов в памяти, тем больше их можно загрузить в память
- Если мало давать памяти процессу, то будет много pagefault-ов
- После N страниц дополнительное выделение памяти процессу не даёт кардинального снижения pagefault-ов.

